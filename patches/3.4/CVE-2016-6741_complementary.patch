From 024cca18bbc49ebbb4c9a09a86056dc68e971523 Mon Sep 17 00:00:00 2001
From: Zennoe <agrar.pfurtz@gmail.com>
Date: Mon, 24 Jul 2017 16:42:58 +0200
Subject: [PATCH] Add I2C_REG_DATA_MAX for size param validation

Patch partially based on https://review.lineageos.org/c/180786/

This patch solves a compile issue occuring whenever CVE-2016-6741 is applied.

Change-Id: I5495e41ffc2e186c3321ff2990ca4679c00432ca
---
 include/media/msm_cam_sensor.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/include/media/msm_cam_sensor.h b/include/media/msm_cam_sensor.h
index cfc39439b048..376fefd01055 100644
--- a/include/media/msm_cam_sensor.h
+++ b/include/media/msm_cam_sensor.h
@@ -10,6 +10,7 @@
 
 #define I2C_SEQ_REG_SETTING_MAX   5
 #define I2C_SEQ_REG_DATA_MAX      20
+#define I2C_REG_DATA_MAX          (8*1024)
 #define MAX_CID                   16
 
 #define I2C_USER_REG_DATA_MAX 1024
-- 
2.13.3

