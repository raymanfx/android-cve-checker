From bd29223405aa8fb161f85ff155ec0a033000617f Mon Sep 17 00:00:00 2001
From: Surendar karka <sukark@codeaurora.org>
Date: Wed, 29 Jun 2016 14:23:25 +0530
Subject: [PATCH] ASoC: msm: qdsp6v2: check param length for EAC3 format

Initialize param length with user space argument and
check the condition for maximum length in
SND_AUDIOCODEC_EAC3 format.

Change-Id: Ic87ef0d634690ee9c432fc72a24a190d15f2249e
CRs-Fixed: 1032820
Signed-off-by: Surendar karka <sukark@codeaurora.org>
Signed-off-by: Paul Keith <javelinanddart@gmail.com>
---

diff --git a/sound/soc/msm/qdsp6v2/msm-compr-q6-v2.c b/sound/soc/msm/qdsp6v2/msm-compr-q6-v2.c
index 5176bbe..231fe49 100755
--- a/sound/soc/msm/qdsp6v2/msm-compr-q6-v2.c
+++ b/sound/soc/msm/qdsp6v2/msm-compr-q6-v2.c
@@ -1081,6 +1081,7 @@
 				__func__, ddp->params_length);
 				return -EINVAL;
 			}
+			params_length = ddp->params_length*sizeof(int);
 			if (params_length > MAX_AC3_PARAM_SIZE) {
 				/*MAX is 36*sizeof(int) this should not happen*/
 				pr_err("%s: params_length(%d) is greater than %d\n",
